# 娜比娅偷吃事件

### **故事背景**

某日，在前往ShaddockNH3办公室的路上，重樱的神子大人 **长门** 意外地发现，一个塞壬人形“娜比娅”正鬼鬼祟祟地躲在角落里偷吃军粮！

「汝，竟敢在余之港区放肆！」

为了维护港区的和平（和食物！），长门决定亲自出手，给这个不懂礼数的闯入者一点教训！

你的任务，就是为长门大人编写战斗的核心逻辑，帮助她赶跑偷吃的娜比娅！

---

### **你的任务流程 (请务必按顺序！)**

1.  **阅读本文档**：先花几分钟了解战斗规则和你的任务。
2.  **打开 `longmen_vs_nabiya.py`**：这是你唯一需要编写代码的文件。
3.  **写一个函数**：从任务一 `display_status` 开始，一次只写一个。
4.  **运行机器人检查**：回到终端，运行 `python check_my_code.py`。机器人会告诉你刚刚写的函数对不对。
5.  **重复3和4**：如果测试通过，就去写下一个；如果失败，就根据提示修改代码，直到通过。
6.  **全部完成后，启动决战**：当机器人告诉你所有任务都通过后，运行 `python start_the_battle.py`，欣赏长门大人与娜比娅的精彩对决吧！

---

### **战斗规则**

*   这是一场1v1回合制对决，HP先归0者败。
*   **长门**: 初始HP 120 (神子大人血更厚一些！)。
*   **娜比娅**: 初始HP 100。

#### **长门的回合行动选项**

你的程序要替长门从下面三种行动中选择一个：

1.  **`'attack'` (炮击)**:
    *   掷4个骰子，计算基础伤害。
    *   **「BIG SEVEN」**: 如果掷出的点数够高（>=18），本次炮击将触发暴击，伤害翻倍！

2.  **`'defend'` (威仪)**:
    *   神子大人展现威仪，进入防御姿态。
    *   掷3个骰子获得“威仪值”，用于抵消娜比娅的下一次攻击。
    *   效果只持续一回合。

3.  **`'special'` (「四万神的守护」)**:
    *   一次赌运气的强力攻击！
    *   有50%的几率成功，召唤守护之力，对娜比娅造成固定的30点伤害。
    *   有50%的几率失败（“唔…失手了…”），不造成任何伤害。

---

### **任务详解：你需要写的8个函数**

**【任务一：`display_status`】**
*   **功能**: 打印角色状态，格式为 `【角色名】HP: 当前血量 / 最大血量`。

**【任务二：`roll_dice`】**
*   **功能**: 模拟掷N个骰子，用 `while` 循环返回总点数。
*   **⭐ 如何使用随机数？⭐**
    *   在 `longmen_vs_nabiya.py` 的文件最上面，已经有一行 `import random`。
    *   要掷一个六面的骰子，你可以使用这个指令：`random.randint(1, 6)`。它会给你一个1到6之间的随机整数。

**【任务三：`choose_nagato_action`】**
*   **功能**: 用 `if/elif/else` 决定长门的行动。HP<30则防御(`'defend'`)，娜比娅HP<20则用特殊技能(`'special'`)，否则炮击(`'attack'`)。

**【任务四：`calculate_attack_damage`】**
*   **功能**: 调用 `roll_dice()` 计算攻击的基础伤害。

**【任务五：`calculate_defense_value`】**
*   **功能**: 调用 `roll_dice()` 计算防御的“威仪值”。

**【任务六：`check_critical_hit`】**
*   **功能**: 伤害 >= 18 返回 `True`，否则 `False`。

**【任务七：`nabiya_ai_action`】**
*   **功能**: 娜比娅HP <= 40 返回 `'defend'`，否则 `'attack'`。

**【任务八：`main_battle_loop`】**
*   **功能**: 核心战斗循环。这是最后一个，也是最复杂的任务。请严格按照文件中的注释步骤来实现。

---

现在，打开 `longmen_vs_nabiya.py`，开始为长门大人编写胜利的方程式吧！(๑•̀ㅂ•́)و✧
