# 🐍 Python 函数使用进阶速查表

## 🔑 一等函数

- 函数是“一等公民”：可赋值、可作为参数、可作为返回值。

------

## ⚙️ 高阶函数

- **filter(func, iterable)** → 过滤
- **map(func, iterable)** → 映射
- **sorted(iterable, key=func)** → 排序（无副作用）

------

## 🛠️ operator 模块

- `operator.add(x, y)` → 加法
- `operator.mul(x, y)` → 乘法
- 常与 `reduce` 搭配使用。

------

## ⚡ Lambda 函数

- 语法：`lambda 参数: 表达式`
- 适合定义小型匿名函数，常用于高阶函数参数。

------

## 🔄 functools.reduce

- 语法：`reduce(func, iterable[, initializer])`

- 用于“归约”序列 → 一个值。

- 示例：阶乘

  ```python
  from functools import reduce
  import operator
  fac = lambda n: reduce(operator.mul, range(2, n+1), 1)
  ```

------

## ✅ all / any

- `all(iterable)` → 全部为真才返回 True

- `any(iterable)` → 只要有一个为真就返回 True

- 示例：素数判断

  ```python
  is_prime = lambda x: all(x % f != 0 for f in range(2, int(x**0.5)+1))
  ```

------

## 🎯 偏函数 functools.partial

- 固定部分参数，生成新函数。

- 示例：

  ```python
  import functools
  int2 = functools.partial(int, base=2)
  print(int2('1001'))  # 9
  ```

------

## 📊 常见对比

| 功能   | reduce 写法                                 | 推荐写法          |
| ------ | ------------------------------------------- | ----------------- |
| 累加   | `reduce(lambda x,y: x+y, nums)`             | `sum(nums)`       |
| 累乘   | `reduce(lambda x,y: x*y, nums)`             | `math.prod(nums)` |
| 最大值 | `reduce(lambda x,y: x if x>y else y, nums)` | `max(nums)`       |

------





**这里是一份关于 Python 函数式编程“三剑客”（`map`、`filter`、`reduce`）的对照表总结，帮助你快速理解它们的区别和用法。**

------

# 🐍 Python 函数式编程三剑客速查表

| 函数       | 作用 | 输入                                   | 输出                             | 常见用途         | 示例                                          |
| ---------- | ---- | -------------------------------------- | -------------------------------- | ---------------- | --------------------------------------------- |
| **map**    | 映射 | 函数 + 可迭代对象                      | 新的迭代器（逐个元素应用函数）   | 数据转换         | `map(lambda x: x**2, [1,2,3]) → [1,4,9]`      |
| **filter** | 过滤 | 函数(返回布尔值) + 可迭代对象          | 新的迭代器（保留满足条件的元素） | 数据筛选         | `filter(lambda x: x%2==0, [1,2,3,4]) → [2,4]` |
| **reduce** | 归约 | 函数(二元) + 可迭代对象 + 初始值(可选) | 单个值                           | 累加、累乘、聚合 | `reduce(lambda x,y:x+y, [1,2,3,4]) → 10`      |

------

## 🔑 核心区别

- **map**：一对一映射，元素逐个变换。
- **filter**：一对零或一，元素要么保留要么丢弃。
- **reduce**：多对一，把整个序列“压缩”为一个值。

------

## ⚡ 使用场景

- **map**：批量转换数据（如平方、取绝对值、格式化字符串）。
- **filter**：筛选符合条件的数据（如偶数、素数、非空字符串）。
- **reduce**：累计计算（如阶乘、累加、最大值、字符串拼接）。

------

## 📊 对比直观理解

- `map` → **加工厂**：把原料逐个加工成新产品。
- `filter` → **筛子**：只留下符合条件的颗粒。
- `reduce` → **压缩机**：把一堆东西压缩成一个结果。

------

## 📝 示例整合

```python
from functools import reduce

nums = [1, 2, 3, 4, 5]

# map: 平方
print(list(map(lambda x: x**2, nums)))  # [1, 4, 9, 16, 25]

# filter: 偶数
print(list(filter(lambda x: x % 2 == 0, nums)))  # [2, 4]

# reduce: 累加
print(reduce(lambda x, y: x + y, nums))  # 15
```

------

三者的定位：**map 转换，filter 筛选，reduce 聚合**。