# ğŸ Python ç±»å‹æ³¨é‡Š (Type Hint) é€ŸæŸ¥ç¬”è®°



ç±»å‹æ³¨é‡Š (Type Hint) æ˜¯ä¸€ç§**â€œå¯é€‰çš„â€**è¯­æ³•ï¼Œå®ƒå…è®¸ä½ â€œå»ºè®®â€å˜é‡ã€å‡½æ•°å‚æ•°å’Œè¿”å›å€¼çš„**é¢„æœŸæ•°æ®ç±»å‹**ã€‚å®ƒ**ä¸**ä¼šå¼ºåˆ¶æ‰§è¡Œï¼Œä½†èƒ½æå¤§åœ°æå‡ä»£ç è´¨é‡ã€‚



## 1. âš ï¸ æœ€é‡è¦çš„è§„åˆ™ï¼šè¿è¡Œæ—¶å¿½ç•¥



- **Python è§£é‡Šå™¨åœ¨ \*è¿è¡Œæ—¶\* ä¼š \*å®Œå…¨å¿½ç•¥\* ä½ çš„ç±»å‹æ³¨é‡Šï¼**
- å®ƒä»¬**ä¸ä¼š**è‡ªåŠ¨æ£€æŸ¥ç±»å‹ï¼Œä¹Ÿ**ä¸ä¼š**é˜»æ­¢ä½ ä¼ å…¥é”™è¯¯ç±»å‹çš„æ•°æ®ï¼Œæ›´**ä¸ä¼š**å› æ­¤æŠ›å‡ºé”™è¯¯ã€‚
- `greet(123)`ï¼ˆå³ä½¿æ³¨é‡Šä¸º `name: str`ï¼‰åœ¨ Python ä¸­**ä¾ç„¶ä¼šè¿è¡Œ**ã€‚



## 2. ğŸ’¡ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ï¼Ÿ



1. **å¯è¯»æ€§ (Readability)ï¼š**
   - ä¸ºâ€œæœªæ¥çš„ä½ â€å’Œâ€œä½ çš„åŒäº‹â€æä¾›æ¸…æ™°çš„æ–‡æ¡£ã€‚
   - `def fn(data: list[dict[str, int]])` è¿œæ¯” `def fn(data)` æ¸…æ™°ã€‚
2. **IDE / ç¼–è¾‘å™¨æ”¯æŒ (Tooling)ï¼š**
   - è¿™æ˜¯ä½ **ç«‹å³**èƒ½æ„Ÿå—åˆ°çš„å¥½å¤„ã€‚
   - ç¼–è¾‘å™¨ (å¦‚ VS Code, PyCharm) ä¼šæ ¹æ®ç±»å‹æ³¨é‡Šæä¾›**ç²¾ç¡®çš„è‡ªåŠ¨è¡¥å…¨** (ä¾‹å¦‚ï¼Œ`name: str`ï¼Œè¾“å…¥ `name.` å°±ä¼šå¼¹å‡º `.upper()`, `.strip()` ç­‰)ã€‚
3. **Bug æ•æ‰ (Static Analysis)ï¼š**
   - è¿™æ˜¯**æœ€å¼ºå¤§**çš„ç”¨é€”ã€‚
   - ä½¿ç”¨**å¤–éƒ¨å·¥å…·**ï¼ˆå¦‚ `Mypy`ï¼‰ï¼Œå¯ä»¥åœ¨ *è¿è¡Œä»£ç å‰* é™æ€æ£€æŸ¥ä½ çš„ç¨‹åºï¼Œæ‰¾å‡ºæ‰€æœ‰â€œç±»å‹ä¸åŒ¹é…â€çš„æ½œåœ¨ Bugã€‚



## 3. åŸºç¡€è¯­æ³•





### a. å˜é‡æ³¨é‡Š



è¯­æ³•ï¼š`variable_name: type = value`

Python

```
name: str = "Alice"
age: int = 30
is_student: bool = True
price: float = 19.99

# ä¹Ÿå¯ä»¥åªå£°æ˜ç±»å‹ï¼Œä¸èµ‹å€¼
user: str 
```



### b. å‡½æ•°æ³¨é‡Š



è¯­æ³•ï¼š`def func(param: type, ...) -> return_type:`

- `param: type`ï¼šæ³¨é‡Šå‚æ•°
- `-> return_type`ï¼šæ³¨é‡Šè¿”å›å€¼

Python

```
# 1. åŸºç¡€ç¤ºä¾‹
def add(a: int, b: int) -> int:
    return a + b

# 2. æ³¨é‡Šé»˜è®¤å‚æ•°
def greet(name: str = "Guest") -> str:
    return f"Hello, {name}"

# 3. å¦‚æœå‡½æ•°ä¸è¿”å›ä»»ä½•ä¸œè¥¿ï¼Œä½¿ç”¨ -> None
def print_message(message: str) -> None:
    print(message)
```



## 4. å¸¸ç”¨ç±»å‹ (ç°ä»£è¯­æ³•)



ä» Python 3.9 / 3.10 å¼€å§‹ï¼Œä½ ä¸å†éœ€è¦ä» `typing` æ¨¡å—å¯¼å…¥ `List`, `Dict` ç­‰ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å†…ç½®çš„ `list`, `dict` å’Œ `|` æ“ä½œç¬¦ã€‚



### a. é›†åˆç±»å‹ (Python 3.9+)



- `list[type]`
- `dict[key_type, value_type]`
- `set[type]`
- `tuple[type1, type2, ...]`

Python

```
scores: list[int] = [100, 95, 88]
user_data: dict[str, str] = {"name": "Alice", "id": "123"}
unique_names: set[str] = {"Alice", "Bob"}
coordinates: tuple[int, int] = (10, 20)
```



### b. `Optional` (å¯èƒ½æ˜¯ `None`) (Python 3.10+)



**æå…¶å¸¸ç”¨ï¼** å½“ä¸€ä¸ªå€¼å¯èƒ½æ˜¯ `None` æ—¶ï¼Œä½¿ç”¨ `| None`ã€‚

- **ç°ä»£è¯­æ³•ï¼š** `str | None`
- **å«ä¹‰ï¼š** è¿™ä¸ªå˜é‡çš„ç±»å‹æ˜¯ `str` **æˆ–è€…** `None`ã€‚

Python

```
def find_user(user_id: int) -> str | None:
    if user_id == 1:
        return "Alice"
    else:
        return None # è¿”å› None æ˜¯åˆæ³•çš„
```



### c. `Union` (å¤šç§å¯èƒ½) (Python 3.10+)



å½“ä¸€ä¸ªå€¼å¯èƒ½æ˜¯å¤šç§ç±»å‹ä¹‹ä¸€æ—¶ï¼Œä½¿ç”¨ `|`ã€‚

- **ç°ä»£è¯­æ³•ï¼š** `int | str`
- **å«ä¹‰ï¼š** è¿™ä¸ªå˜é‡çš„ç±»å‹æ˜¯ `int` **æˆ–è€…** `str`ã€‚

Python

```
def get_by_id(item_id: int | str) -> dict | None:
    print(f"Fetching item: {item_id}")
    # ...
    return None
```



### d. `Any` (â€œé€ƒç”Ÿé€šé“â€)



å½“ä½  *ä¸å…³å¿ƒ* ç±»å‹ï¼Œæˆ–è€…ç±»å‹è¿‡äºå¤æ‚æ— æ³•å®šä¹‰æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `Any`ã€‚

- **å¯¼å…¥ï¼š** `from typing import Any`
- **è­¦å‘Šï¼š** `Any` åŸºæœ¬ä¸Šæ˜¯å‘Šè¯‰ç±»å‹æ£€æŸ¥å™¨ï¼ˆå¦‚ Mypyï¼‰â€œ**æ”¾å¼ƒæ£€æŸ¥è¿™ä¸ªå˜é‡**â€ã€‚è¯·å°½é‡é¿å…ä½¿ç”¨å®ƒã€‚

Python

```
from typing import Any

def process_anything(data: Any) -> Any:
    # ...
    return data
```



## 5. ä¼ ç»Ÿè¯­æ³• (Python < 3.9)



å¦‚æœä½ åœ¨è€ç‰ˆæœ¬çš„ Python ä¸Šå·¥ä½œï¼Œä½ éœ€è¦ä» `typing` æ¨¡å—å¯¼å…¥å¤§å†™ç‰ˆæœ¬çš„ç±»å‹ï¼š

```
from typing import List, Dict, Set, Tuple, Optional, Union, Any
```

- `list[int]` å¯¹åº” `List[int]`
- `dict[str, str]` å¯¹åº” `Dict[str, str]`
- `str | None` å¯¹åº” `Optional[str]`
- `int | str` å¯¹åº” `Union[int, str]`



## 6. è¯­æ³•é€ŸæŸ¥è¡¨ (æ¨èç°ä»£è¯­æ³•)



| **è¯­æ³• (Syntax)**        | **å«ä¹‰ (Meaning)**                                           |
| ------------------------ | ------------------------------------------------------------ |
| `my_var: str`            | å˜é‡ `my_var` åº”è¯¥æ˜¯ `str` ç±»å‹                              |
| `my_var: int = 10`       | å˜é‡ `my_var` åº”è¯¥æ˜¯ `int`ï¼Œé»˜è®¤å€¼ä¸º `10`                    |
| `-> int`                 | å‡½æ•°çš„è¿”å›å€¼åº”è¯¥æ˜¯ `int`                                     |
| `-> None`                | å‡½æ•°ä¸è¿”å›ä»»ä½•æœ‰æ•ˆå€¼                                         |
| `list[str]`              | ä¸€ä¸ª**å­—ç¬¦ä¸²åˆ—è¡¨** (e.g., `["a", "b"]`)                      |
| `dict[str, int]`         | ä¸€ä¸ª**å­—å…¸**ï¼ŒKey æ˜¯ `str`ï¼ŒValue æ˜¯ `int` (e.g., `{"age": 30}`) |
| `tuple[int, str]`        | ä¸€ä¸ª**å…ƒç»„**ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ `int`ï¼Œç¬¬äºŒä¸ªæ˜¯ `str` (e.g., `(1, "hi")`) |
| `set[int]`               | ä¸€ä¸ª**æ•´æ•°é›†åˆ** (e.g., `{1, 2, 3}`)                         |
| `str | None`             | ç±»å‹æ˜¯ `str` **æˆ–è€…** `None` (æœ€å¸¸ç”¨çš„ `Optional`)           |
| `int | str`              | ç±»å‹æ˜¯ `int` **æˆ–è€…** `str` (æœ€å¸¸ç”¨çš„ `Union`)               |
| `from typing import Any` | å¯¼å…¥ `Any` ç±»å‹                                              |
| `data: Any`              | `data` å¯ä»¥æ˜¯**ä»»ä½•ç±»å‹** (æ”¾å¼ƒç±»å‹æ£€æŸ¥)                     |

